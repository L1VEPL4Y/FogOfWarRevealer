<script lang="ts">
	import { onMount } from 'svelte';
  import OpenSeadragon from 'openseadragon';

    let viewer:OpenSeadragon.Viewer;
    let {styleClasses, currentMapSrc}:{styleClasses: string, currentMapSrc:string} = $props();
    onMount(() => {
      viewer = OpenSeadragon({
        id: "openSeadragonViewer",
        prefixUrl: "https://openseadragon.github.io/openseadragon/images/",
        //Initially load a simple full white image
        tileSources: {
          type: 'image',
          url: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABgAAAANgCAYAAADqIqOWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAABvySURBVHhe7dkxDQAwDMCw8ifd/mOwyD5DIbMAAAAAAEDOvAEAAAAAAPifAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABBkAAAAAAAAQZAAAAAAAAECQAQAAAAAAAEEGAAAAAAAABB3zBLp+hsBhhAAAAABJRU5ErkJggg=="
        }
      });
    });
    $effect(() => {
      console.log(currentMapSrc);
      if(currentMapSrc != "" && viewer){
        viewer.open({
                type: 'image',
                url: currentMapSrc
            })
      }
    });


  
</script>
<div id="openSeadragonViewer" class={styleClasses}>

</div>